### AI SVG 編輯器使用說明

以下是基於提供的 `ai-svg-edit.html` 和 `ai-svg-edit.js` 文件的 AI SVG 編輯器使用說明。此編輯器是一個基於 Fabric.js 的網頁應用程式，允許用戶創建、編輯和儲存 SVG 圖形，提供多種繪圖工具、樣式選項和操作功能。以下是詳細的使用指南：

---

### 1. 環境設置與啟動
- **開啟方式**：將 `ai-svg-edit.html` 放在支援 JavaScript 的網頁伺服器或本地環境中，通過瀏覽器打開該文件。
- **依賴**：
  - Fabric.js（版本 5.3.1）：用於畫布渲染和物件操作。
  - qrcode.min.js：用於生成 QR 碼。
  - Font Awesome（版本 6.5.1）：提供圖標。
- **檔案結構**：
  - `ai-svg-edit.html`：主 HTML 文件，定義頁面結構和載入腳本。
  - `ai-svg-edit.js`：核心 JavaScript 邏輯，實現編輯器功能。
  - `static/qrcode.min.js`：需確保該文件存在於 `static` 目錄下。

---

### 2. 介面概覽
- **畫布區域**：位於頁面中央，用於繪製和編輯圖形，支援縮放和拖曳。
- **控制面板**：位於畫布頂部，包含以下功能區：
  - **工具**：選擇繪圖工具（如游標、圓形、矩形等）。
  - **顏色**：設定填充顏色、邊框顏色和邊框寬度。
  - **文字選項**：調整字型、字型大小、粗體和底線。
  - **操作**：執行儲存、載入、刪除、複製等操作。
  - **對齊**：對選中物件進行水平或垂直對齊。
- **座標顯示**：位於畫布左下角，顯示選中物件的座標（左上角位置）。
- **檔案名稱顯示**：位於畫布左下角，顯示當前載入的 SVG 檔案名稱。
- **顏色選擇面板**：點擊填充或邊框顏色輸入框時彈出，用於選擇顏色或設定透明度。

---

### 3. 功能使用說明

#### 3.1 繪圖工具
控制面板中的「工具」區提供以下繪圖選項：
- **游標**：用於選擇和移動畫布上的物件。
- **圓形**：繪製圓形，按住滑鼠左鍵拖曳確定半徑。
- **矩形**：繪製矩形，按住滑鼠左鍵拖曳確定寬高。
- **線條**：繪製直線，從起點拖曳至終點。
- **文字**：點擊畫布添加可編輯文字，輸入後按 Enter 確認。
- **三角形**：繪製三角形（多邊形，預設三邊），拖曳調整大小。
- **手繪線**：自由繪製線條，支援邊框顏色和寬度調整。

**使用步驟**：
1. 在「工具」區點擊選擇所需工具，當前工具按鈕會高亮。
2. 在畫布上點擊或拖曳以繪製對應圖形。
3. 繪製完成後，自動進入可選中狀態，可拖曳調整位置或大小。

#### 3.2 樣式調整
- **填充顏色**：
  - 點擊「填充顏色」輸入框，彈出顏色選擇面板。
  - 使用顏色選擇器設定顏色，或調整透明度（0-100%）。
  - 透明度可通過輸入數字或點擊「+」「-」按鈕調整。
- **邊框顏色**：
  - 點擊「邊框顏色」輸入框，彈出顏色選擇面板。
  - 選擇顏色或點擊「透明」按鈕移除邊框。
- **邊框寬度**：
  - 在「邊框寬度」輸入框中輸入 1-10 的數字，設定邊框粗細。
- **應用樣式**：
  - 選擇物件後，點擊「應用樣式」按鈕，將當前填充、邊框和透明度設定應用到選中物件。

#### 3.3 文字編輯
- **添加文字**：
  - 選擇「文字」工具，點擊畫布添加文字框。
  - 直接輸入文字，按 Enter 確認或點擊畫布其他區域退出編輯。
- **文字選項**：
  - **字型**：從下拉選單選擇 Arial、Times New Roman 或 Courier New。
  - **字型大小**：輸入 8-72 的數字。
  - **粗體**：勾選「粗體」複選框。
  - **底線**：勾選「底線」複選框。
  - 更改選項後，自動應用到選中的文字物件。

#### 3.4 操作功能
- **刪除選中**：選擇物件後點擊「刪除」按鈕，或按 Delete 鍵移除。
- **複製選中**：選擇物件後點擊「複製」按鈕，生成偏移 10 像素的副本。
- **群組選中**：選擇多個物件後點擊「群組」按鈕，將其合併為一個群組。
- **解除群組**：選擇群組後點擊「解除群組」按鈕，還原為單獨物件。
- **上移一層**：選擇物件後點擊「上移」按鈕，將其移到上一圖層。
- **下移一層**：選擇物件後點擊「下移」按鈕，將其移到下一圖層。
- **儲存 SVG**：
  - 點擊「儲存 SVG」按鈕。
  - 若有選中物件，系統會詢問是否僅儲存選中物件：
    - 點擊「確定」儲存選中物件。
    - 點擊「取消」儲存整個畫布（不含網格）。
  - 檔案名稱預設為 `drawing.svg` 或 `selected_drawing.svg`，若已載入 SVG 則使用其名稱。
- **載入 SVG**：
  - 點擊「載入 SVG」按鈕，選擇本地的 `.svg` 檔案。
  - 載入的 SVG 會顯示在畫布上（位置：x=100, y=100），並記錄檔案名稱。
- **生成 QR 碼**：
  - 點擊「生成 QR 碼」按鈕，輸入文字或 URL。
  - 生成的 QR 碼以 SVG 形式添加到畫布（位置：x=100, y=100）。
- **清除畫布**：
  - 點擊「清除畫布」按鈕，確認後移除所有非網格物件並清除檔案名稱。
- **旋轉**：
  - **向左轉 90 度**：選擇物件後點擊「向左轉」按鈕。
  - **向右轉 90 度**：選擇物件後點擊「向右轉」按鈕。

#### 3.5 對齊功能
- **左對齊**：將選中物件對齊到最左邊的邊界或畫布左邊。
- **中間對齊**：水平居中對齊（相對於選中範圍或畫布）。
- **右對齊**：對齊到最右邊的邊界或畫布右邊。
- **頂部對齊**：對齊到最上方的邊界或畫布頂部。
- **垂直居中**：垂直居中對齊（相對於選中範圍或畫布）。
- **底部對齊**：對齊到最下方的邊界或畫布底部。

**使用方法**：
1. 選擇單個或多個物件。
2. 點擊對應的對齊按鈕，物件會自動調整位置。

#### 3.6 其他功能
- **網格**：畫布自動顯示 8x8 像素的網格（淺灰色），不可選中或編輯。
- **座標顯示**：選擇物件時，左下角顯示其左上角座標（四捨五入至整數）。
- **檔案名稱**：載入 SVG 後，左下角顯示檔案名稱（不含副檔名）。
- **響應式設計**：畫布隨視窗大小調整，確保控制面板和畫布適配不同螢幕。

---

### 4. 操作範例
#### 範例 1：繪製一個紅色圓形
1. 在「工具」區選擇「圓形」。
2. 在畫布上點擊並拖曳，繪製圓形。
3. 在「顏色」區點擊「填充顏色」，選擇紅色（#FF0000），設定透明度為 100%。
4. 點擊「應用樣式」，圓形填充為紅色。
5. 點擊「儲存 SVG」，選擇儲存整個畫布，生成 `drawing.svg`。

#### 範例 2：添加並編輯文字
1. 選擇「文字」工具，點擊畫布輸入「Hello」。
2. 在「文字選項」區選擇字型「Times New Roman」，字型大小設為 32，勾選「粗體」。
3. 點擊「應用樣式」，文字更新為粗體 Times New Roman，32 像素。
4. 拖曳文字到畫布中央，點擊「中間對齊」和「垂直居中」按鈕。

#### 範例 3：生成 QR 碼
1. 點擊「生成 QR 碼」按鈕，輸入「https://example.com」。
2. QR 碼出現在畫布上，選擇並拖曳到適當位置。
3. 點擊「儲存 SVG」，儲存包含 QR 碼的圖形。

---

### 5. 注意事項
- **瀏覽器相容性**：建議使用最新版本的 Chrome、Firefox 或 Edge。
- **檔案格式**：僅支援 `.svg` 格式的載入和儲存。
- **透明邊框限制**：選擇透明邊框時，手繪線工具會自動禁用並切換到游標工具。
- **文字編輯**：文字物件進入編輯模式後，需點擊畫布外或按 Enter 退出。
- **效能**：過多物件可能影響畫布性能，建議適量繪製。
- **錯誤處理**：
  - 若無法載入 SVG，檢查檔案格式是否正確。
  - 若 QR 碼生成失敗，確保輸入有效文字或 URL。

---

### 6. 進階功能
- **群組操作**：多選物件後群組，可統一移動、縮放或旋轉。
- **層級管理**：使用「上移一層」和「下移一層」精確控制物件層次。
- **SVG 編輯**：載入外部 SVG 後，可解組或編輯其子物件。
- **自訂樣式**：透過修改 `ai-svg-edit.js` 中的 CSS 樣式，調整控制面板外觀。

---

### 7. 常見問題
- **Q：為何無法繪製手繪線？**
  - A：檢查是否選擇了透明邊框，需選擇非透明顏色並重新啟用手繪工具。
- **Q：儲存的 SVG 檔案空白？**
  - A：確保畫布上有非網格物件，且選擇了正確的儲存範圍（選中物件或整個畫布）。
- **Q：如何調整畫布大小？**
  - A：畫布自動適配視窗大小，可調整瀏覽器視窗或修改 `resizeCanvas` 函數中的最小高度（`minHeight`）。
- **Q：載入的 SVG 位置不正確？**
  - A：載入的 SVG 預設位於 (100, 100)，可手動拖曳調整。

---

### 8. 聯繫與支援
- 若需技術支援，可檢查瀏覽器控制台（F12）中的錯誤訊息。
- 參考 Fabric.js 官方文檔（http://fabricjs.com/）或 QRCode.js 文檔以了解底層實現。
- 對於程式碼修改或功能擴展，建議備份原始檔案並在本地測試。

希望此使用說明能幫助您快速上手 AI SVG 編輯器！若有其他問題，請隨時提出。
